"use strict";angular.module("angular.boleto",["ui.bootstrap","ui.mask"]).directive("inputBoleto",[function(){return{restrict:"E",replace:!0,require:"?ngModel",scope:{form:"=",name:"@",validarValor:"="},template:'<input type="text" ui-mask="?99999.99999 99999.999999 99999.999999 9 99999999999999" placeholder="_____._____ _____.______ _____.______ _ ______________" />',link:function(r,t,a,e){r.$watch(a.ngModel,function(r){o(r)});var o=function(t){var a;return n(),"undefined"!=typeof t&&0!=t.length?(a=t.replace(/[^0-9]/g,""),a.length<47?(r.form[r.name].$setValidity("tamanhoErrado",!1),!1):0===parseInt(a)||0===a.length?(r.form[r.name].$setValidity("zerado",!1),!1):47==a.length&&l(a)?!0:void 0):void 0},n=function(){r.form[r.name].$setValidity("tamanhoErrado",!0),r.form[r.name].$setValidity("zerado",!0),r.form[r.name].$setValidity("verificadorErrado",!0),r.form[r.name].$setValidity("bloco1Errado",!0),r.form[r.name].$setValidity("bloco2Errado",!0),r.form[r.name].$setValidity("bloco3Errado",!0),r.form[r.name].$setValidity("valorErrado",!0)},i=function(r){for(var t,a=0,e=2,o=r.length-1;o>=0;)t=r.substr(o,1)*e,t>=10&&(t=1+(t-10)),a+=t,e=2==e?1:2,o-=1;var n=10-a%10;return 10==n&&(n=0),n},l=function(t){var a=t.substr(0,9),e=t.substr(9,1),o=i(a);if(0===parseInt(a)||e!=o)return r.form[r.name].$setValidity("bloco1Errado",!1),!1;var n=t.substr(10,10),l=t.substr(20,1),_=i(n);if(0===parseInt(n)||l!=_)return r.form[r.name].$setValidity("bloco2Errado",!1),!1;var s=t.substr(21,10),d=t.substr(31,1),u=i(s);if(0===parseInt(s)||d!=u)return r.form[r.name].$setValidity("bloco3Errado",!1),!1;if("undefined"!=typeof r.validarValor){var m=t.substr(37,10);if(m=parseFloat(m.substr(0,8)+"."+m.substr(m.length-2)),m!==r.validarValor)return r.form[r.name].$setValidity("valorErrado",!1),!1}return!0}}}}]);